import { Component } from '@angular/core';
import { takeUntil } from 'rxjs/operators';
import { ResponseCode, Pattern } from '@dongkap/do-core';
import { BaseFormComponent } from '@dongkap/do-shared';
import * as i0 from "@angular/core";
import * as i1 from "@angular/router";
import * as i2 from "../services/corporate.service";
import * as i3 from "@dongkap/do-shared";
import * as i4 from "@angular/forms";
export class CorporateAddEditPageComponent extends BaseFormComponent {
    constructor(injector, router, route, corporateService) {
        super(injector, {
            corporateCode: [],
            corporateName: [],
            corporateNonExpired: [],
            email: [],
            address: [],
            telpNumber: [],
            faxNumber: [],
        });
        this.injector = injector;
        this.router = router;
        this.route = route;
        this.corporateService = corporateService;
        this.action = 'Add';
        this.patternEmail = Pattern.EMAIL;
        this.patternPhoneNumber = Pattern.PHONE_NUMBER;
        this.dataDefault = [
            {
                id: 'corporateNonExpired',
                selected: true,
            },
        ];
        if (this.corporateService.getCorporate() || (this.route.snapshot.params['action'] === 'add')) {
            if ((this.route.snapshot.params['action'] === 'edit')) {
                this.action = 'Edit';
                this.formGroup.get('corporateCode').setValue(this.corporateService.getCorporate().corporateCode);
                this.formGroup.get('corporateName').setValue(this.corporateService.getCorporate().corporateName);
                this.formGroup.get('email').setValue(this.corporateService.getCorporate().email);
                this.formGroup.get('address').setValue(this.corporateService.getCorporate().address);
                this.formGroup.get('telpNumber').setValue(this.corporateService.getCorporate().telpNumber);
                this.formGroup.get('faxNumber').setValue(this.corporateService.getCorporate().faxNumber);
                this.formGroup.get('corporateNonExpired').setValue([{
                        id: 'corporateNonExpired',
                        selected: this.corporateService.getCorporate().corporateNonExpired ? true : false,
                    }]);
                this.formGroup.get('corporateCode').disable();
            }
        }
        else {
            this.router.navigate(['/app/mgmt/corporate']);
        }
    }
    ngOnInit() { }
    onReset() {
        this.router.navigate(['/app/mgmt/corporate']);
    }
    onSubmit() {
        const corporateNonExpired = this.formGroup.get('corporateNonExpired').value;
        const data = {
            corporateCode: this.formGroup.get('corporateCode').value,
            corporateName: this.formGroup.get('corporateName').value,
            corporateNonExpired: (corporateNonExpired ? true : false),
            email: this.formGroup.get('email').value,
            address: this.formGroup.get('address').value,
            telpNumber: this.formGroup.get('telpNumber').value,
            faxNumber: this.formGroup.get('faxNumber').value
        };
        super.onSubmit(data, 'security', 'post-corporate')
            .pipe(takeUntil(this.destroy$))
            .subscribe(response => {
            if (response.respStatusCode === ResponseCode.OK_DEFAULT.toString()) {
                this.router.navigate(['/app/mgmt/corporate']);
            }
        });
    }
}
CorporateAddEditPageComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.16", ngImport: i0, type: CorporateAddEditPageComponent, deps: [{ token: i0.Injector }, { token: i1.Router }, { token: i1.ActivatedRoute }, { token: i2.CorporateService }], target: i0.ɵɵFactoryTarget.Component });
CorporateAddEditPageComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "12.2.16", type: CorporateAddEditPageComponent, selector: "do-corporate-add-edit-page", usesInheritance: true, ngImport: i0, template: "<do-page-outlet [header]=\"'header.'+action+'-corporate'\" [url]=\"'/app/mgmt/corporate'\">\n  <div class=\"row\" pagecontent>\n    <div class=\"col-md-12 col-lg-12\">\n      <form [formGroup]=\"formGroup\">\n        <do-input-text\n          [name]=\"'corporateCode'\"\n          [label]=\"'Corporate Code'\"\n          [required]=\"true\"\n          [skeleton]=\"loadingForm\"\n          formControlName=\"corporateCode\">\n        </do-input-text>\n        <do-input-text\n          [name]=\"'corporateName'\"\n          [label]=\"'Corporate Name'\"\n          [required]=\"true\"\n          [skeleton]=\"loadingForm\"\n          formControlName=\"corporateName\">\n        </do-input-text>\n        <do-checkbox\n          [name]=\"'corporateNonExpired'\"\n          [label]=\"'Non Expired'\"\n          [data]=\"dataDefault\"\n          formControlName=\"corporateNonExpired\">\n        </do-checkbox>\n        <do-input-text\n          [name]=\"'email'\"\n          [label]=\"'Email'\"\n          [required]=\"true\"\n          [pattern]=\"patternEmail\"\n          [paramError]=\"{value:5}\"\n          [skeleton]=\"loadingForm\"\n          formControlName=\"email\">\n        </do-input-text>\n        <do-textarea\n          [name]=\"'address'\"\n          [label]=\"'Address'\"\n          [required]=\"true\"\n          [minLength]=\"5\"\n          [skeleton]=\"loadingForm\"\n          formControlName=\"address\">\n        </do-textarea>\n        <do-input-text\n          [name]=\"'telpNumber'\"\n          [label]=\"'Telp.'\"\n          [required]=\"true\"\n          [pattern]=\"patternPhoneNumber\"\n          [skeleton]=\"loadingForm\"\n          formControlName=\"telpNumber\">\n        </do-input-text>\n        <do-input-text\n          [name]=\"'faxNumber'\"\n          [label]=\"'Fax.'\"\n          [pattern]=\"patternPhoneNumber\"\n          [skeleton]=\"loadingForm\"\n          formControlName=\"faxNumber\">\n        </do-input-text>\n      </form>\n    </div>\n  </div>\n  <do-button-submit\n    [submitTitle]=\"action\"\n    [resetTitle]=\"'Cancel'\"\n    [formGroupButton]=\"formGroup\"\n    [disabledButton]=\"disabled\"\n    (onReset)=\"onReset()\"\n    (onSubmit)=\"onSubmit()\"\n    pagefooter>\n  </do-button-submit>\n</do-page-outlet>\n", styles: [""], components: [{ type: i3.DoPageOutletComponent, selector: "do-page-outlet", inputs: ["header", "url", "width", "dataSelect", "selected", "param", "hidefooter", "showToggle", "isCollapsed", "iconToggle"], outputs: ["selectChange", "onCollapsed", "onExpanded"] }, { type: i3.DoInputTextComponent, selector: "do-input-text", inputs: ["placeholder", "colLabel", "colInput", "minLength", "maxLength", "min", "max", "step", "capslock", "type", "togglePassword", "showPassword"] }, { type: i3.DoCheckboxComponent, selector: "do-checkbox", inputs: ["colLabel", "colInput", "data"], outputs: ["onChecked"] }, { type: i3.DoTextareaComponent, selector: "do-textarea", inputs: ["placeholder", "colLabel", "colInput", "minLength", "maxLength", "height"] }, { type: i3.DoButtonSubmitComponent, selector: "do-button-submit", inputs: ["colLabel", "colButton", "resetTitle", "submitTitle", "disabledButton", "disabledReset", "type", "status", "skeleton", "formGroupButton"], outputs: ["onSubmit", "onReset"] }], directives: [{ type: i4.ɵNgNoValidate, selector: "form:not([ngNoForm]):not([ngNativeValidate])" }, { type: i4.NgControlStatusGroup, selector: "[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]" }, { type: i4.FormGroupDirective, selector: "[formGroup]", inputs: ["formGroup"], outputs: ["ngSubmit"], exportAs: ["ngForm"] }, { type: i4.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { type: i4.FormControlName, selector: "[formControlName]", inputs: ["disabled", "formControlName", "ngModel"], outputs: ["ngModelChange"] }, { type: i4.RequiredValidator, selector: ":not([type=checkbox])[required][formControlName],:not([type=checkbox])[required][formControl],:not([type=checkbox])[required][ngModel]", inputs: ["required"] }, { type: i4.PatternValidator, selector: "[pattern][formControlName],[pattern][formControl],[pattern][ngModel]", inputs: ["pattern"] }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.16", ngImport: i0, type: CorporateAddEditPageComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'do-corporate-add-edit-page',
                    styleUrls: ['./corporate-add-edit-page.component.scss'],
                    templateUrl: './corporate-add-edit-page.component.html',
                }]
        }], ctorParameters: function () { return [{ type: i0.Injector }, { type: i1.Router }, { type: i1.ActivatedRoute }, { type: i2.CorporateService }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29ycG9yYXRlLWFkZC1lZGl0LXBhZ2UuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vQGRvbmdrYXAvZG8tc3lzL3NyYy9saWIvY29ycG9yYXRlL2FkZC1lZGl0L2NvcnBvcmF0ZS1hZGQtZWRpdC1wYWdlLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uLy4uL0Bkb25na2FwL2RvLXN5cy9zcmMvbGliL2NvcnBvcmF0ZS9hZGQtZWRpdC9jb3Jwb3JhdGUtYWRkLWVkaXQtcGFnZS5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFZLE1BQU0sZUFBZSxDQUFDO0FBSXBELE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUMzQyxPQUFPLEVBQW1CLFlBQVksRUFBRSxPQUFPLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUMxRSxPQUFPLEVBQUUsaUJBQWlCLEVBQWlCLE1BQU0sb0JBQW9CLENBQUM7Ozs7OztBQVN0RSxNQUFNLE9BQU8sNkJBQThCLFNBQVEsaUJBQXNCO0lBV3ZFLFlBQ1MsUUFBa0IsRUFDakIsTUFBYyxFQUNkLEtBQXFCLEVBQ3JCLGdCQUFrQztRQUMxQyxLQUFLLENBQUMsUUFBUSxFQUNaO1lBQ0UsYUFBYSxFQUFFLEVBQUU7WUFDakIsYUFBYSxFQUFFLEVBQUU7WUFDakIsbUJBQW1CLEVBQUUsRUFBRTtZQUN2QixLQUFLLEVBQUUsRUFBRTtZQUNULE9BQU8sRUFBRSxFQUFFO1lBQ1gsVUFBVSxFQUFFLEVBQUU7WUFDZCxTQUFTLEVBQUUsRUFBRTtTQUNkLENBQUMsQ0FBQztRQWJFLGFBQVEsR0FBUixRQUFRLENBQVU7UUFDakIsV0FBTSxHQUFOLE1BQU0sQ0FBUTtRQUNkLFVBQUssR0FBTCxLQUFLLENBQWdCO1FBQ3JCLHFCQUFnQixHQUFoQixnQkFBZ0IsQ0FBa0I7UUFickMsV0FBTSxH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cm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IE9uSW5pdCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgUm91dGVyLCBBY3RpdmF0ZWRSb3V0ZSB9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyB0YWtlVW50aWwgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5pbXBvcnQgeyBBcGlCYXNlUmVzcG9uc2UsIFJlc3BvbnNlQ29kZSwgUGF0dGVybiB9IGZyb20gJ0Bkb25na2FwL2RvLWNvcmUnO1xuaW1wb3J0IHsgQmFzZUZvcm1Db21wb25lbnQsIENoZWNrYm94TW9kZWwgfSBmcm9tICdAZG9uZ2thcC9kby1zaGFyZWQnO1xuaW1wb3J0IHsgQ29ycG9yYXRlU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL2NvcnBvcmF0ZS5zZXJ2aWNlJztcbmltcG9ydCB7IENvcnBvcmF0ZU1vZGVsIH0gZnJvbSAnLi4vbW9kZWxzL2NvcnBvcmF0ZS5tb2RlbCc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2RvLWNvcnBvcmF0ZS1hZGQtZWRpdC1wYWdlJyxcbiAgc3R5bGVVcmxzOiBbJy4vY29ycG9yYXRlLWFkZC1lZGl0LXBhZ2UuY29tcG9uZW50LnNjc3MnXSxcbiAgdGVtcGxhdGVVcmw6ICcuL2NvcnBvcmF0ZS1hZGQtZWRpdC1wYWdlLmNvbXBvbmVudC5odG1sJyxcbn0pXG5leHBvcnQgY2xhc3MgQ29ycG9yYXRlQWRkRWRpdFBhZ2VDb21wb25lbnQgZXh0ZW5kcyBCYXNlRm9ybUNvbXBvbmVudDxhbnk+IGltcGxlbWVudHMgT25Jbml0IHtcblxuICBwdWJsaWMgYWN0aW9uOiAnQWRkJyB8ICdFZGl0JyA9ICdBZGQnO1xuICBwdWJsaWMgcGF0dGVybkVtYWlsOiBzdHJpbmcgPSBQYXR0ZXJuLkVNQUlMO1xuICBwdWJsaWMgcGF0dGVyblBob25lTnVtYmVyOiBzdHJpbmcgPSBQYXR0ZXJuLlBIT05FX05VTUJFUjtcbiAgcHVibGljIGRhdGFEZWZhdWx0OiBDaGVja2JveE1vZGVsW10gPSBbXG4gICAge1xuICAgICAgaWQ6ICdjb3Jwb3JhdGVOb25FeHBpcmVkJyxcbiAgICAgIHNlbGVjdGVkOiB0cnVlLFxuICAgIH0sXG4gIF07XG4gIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyBpbmplY3RvcjogSW5qZWN0b3IsXG4gICAgcHJpdmF0ZSByb3V0ZXI6IFJvdXRlcixcbiAgICBwcml2YXRlIHJvdXRlOiBBY3RpdmF0ZWRSb3V0ZSxcbiAgICBwcml2YXRlIGNvcnBvcmF0ZVNlcnZpY2U6IENvcnBvcmF0ZVNlcnZpY2UpIHtcbiAgICBzdXBlcihpbmplY3RvcixcbiAgICAgIHtcbiAgICAgICAgY29ycG9yYXRlQ29kZTogW10sXG4gICAgICAgIGNvcnBvcmF0ZU5hbWU6IFtdLFxuICAgICAgICBjb3Jwb3JhdGVOb25FeHBpcmVkOiBbXSxcbiAgICAgICAgZW1haWw6IFtdLFxuICAgICAgICBhZGRyZXNzOiBbXSxcbiAgICAgICAgdGVscE51bWJlcjogW10sXG4gICAgICAgIGZheE51bWJlcjogW10sXG4gICAgICB9KTtcbiAgICBpZiAodGhpcy5jb3Jwb3JhdGVTZXJ2aWNlLmdldENvcnBvcmF0ZSgpIHx8ICh0aGlzLnJvdXRlLnNuYXBzaG90LnBhcmFtc1snYWN0aW9uJ10gPT09ICdhZGQnKSkge1xuICAgICAgaWYgKCh0aGlzLnJvdXRlLnNuYXBzaG90LnBhcmFtc1snYWN0aW9uJ10gPT09ICdlZGl0JykpIHtcbiAgICAgICAgdGhpcy5hY3Rpb24gPSAnRWRpdCc7XG4gICAgICAgIHRoaXMuZm9ybUdyb3VwLmdldCgnY29ycG9yYXRlQ29kZScpLnNldFZhbHVlKHRoaXMuY29ycG9yYXRlU2VydmljZS5nZXRDb3Jwb3JhdGUoKS5jb3Jwb3JhdGVDb2RlKTtcbiAgICAgICAgdGhpcy5mb3JtR3JvdXAuZ2V0KCdjb3Jwb3JhdGVOYW1lJykuc2V0VmFsdWUodGhpcy5jb3Jwb3JhdGVTZXJ2aWNlLmdldENvcnBvcmF0ZSgpLmNvcnBvcmF0ZU5hbWUpO1xuICAgICAgICB0aGlzLmZvcm1Hcm91cC5nZXQoJ2VtYWlsJykuc2V0VmFsdWUodGhpcy5jb3Jwb3JhdGVTZXJ2aWNlLmdldENvcnBvcmF0ZSgpLmVtYWlsKTtcbiAgICAgICAgdGhpcy5mb3JtR3JvdXAuZ2V0KCdhZGRyZXNzJykuc2V0VmFsdWUodGhpcy5jb3Jwb3JhdGVTZXJ2aWNlLmdldENvcnBvcmF0ZSgpLmFkZHJlc3MpO1xuICAgICAgICB0aGlzLmZvcm1Hcm91cC5nZXQoJ3RlbHBOdW1iZXInKS5zZXRWYWx1ZSh0aGlzLmNvcnBvcmF0ZVNlcnZpY2UuZ2V0Q29ycG9yYXRlKCkudGVscE51bWJlcik7XG4gICAgICAgIHRoaXMuZm9ybUdyb3VwLmdldCgnZmF4TnVtYmVyJykuc2V0VmFsdWUodGhpcy5jb3Jwb3JhdGVTZXJ2aWNlLmdldENvcnBvcmF0ZSgpLmZheE51bWJlcik7XG4gICAgICAgIHRoaXMuZm9ybUdyb3VwLmdldCgnY29ycG9yYXRlTm9uRXhwaXJlZCcpLnNldFZhbHVlKFt7XG4gICAgICAgICAgaWQ6ICdjb3Jwb3JhdGVOb25FeHBpcmVkJyxcbiAgICAgICAgICBzZWxlY3RlZDogdGhpcy5jb3Jwb3JhdGVTZXJ2aWNlLmdldENvcnBvcmF0ZSgpLmNvcnBvcmF0ZU5vbkV4cGlyZWQgPyB0cnVlIDogZmFsc2UsXG4gICAgICAgIH1dKTtcbiAgICAgICAgdGhpcy5mb3JtR3JvdXAuZ2V0KCdjb3Jwb3JhdGVDb2RlJykuZGlzYWJsZSgpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJvdXRlci5uYXZpZ2F0ZShbJy9hcHAvbWdtdC9jb3Jwb3JhdGUnXSk7XG4gICAgfVxuICB9XG5cbiAgbmdPbkluaXQoKTogdm9pZCB7fVxuXG4gIG9uUmVzZXQoKTogdm9pZCB7XG4gICAgdGhpcy5yb3V0ZXIubmF2aWdhdGUoWycvYXBwL21nbXQvY29ycG9yYXRlJ10pO1xuICB9XG5cbiAgb25TdWJtaXQoKTogdm9pZCB7XG4gICAgY29uc3QgY29ycG9yYXRlTm9uRXhwaXJlZDogQ2hlY2tib3hNb2RlbFtdID0gdGhpcy5mb3JtR3JvdXAuZ2V0KCdjb3Jwb3JhdGVOb25FeHBpcmVkJykudmFsdWU7XG4gICAgY29uc3QgZGF0YTogQ29ycG9yYXRlTW9kZWwgPSB7XG4gICAgICBjb3Jwb3JhdGVDb2RlOiB0aGlzLmZvcm1Hcm91cC5nZXQoJ2NvcnBvcmF0ZUNvZGUnKS52YWx1ZSxcbiAgICAgIGNvcnBvcmF0ZU5hbWU6IHRoaXMuZm9ybUdyb3VwLmdldCgnY29ycG9yYXRlTmFtZScpLnZhbHVlLFxuICAgICAgY29ycG9yYXRlTm9uRXhwaXJlZDogKGNvcnBvcmF0ZU5vbkV4cGlyZWQgPyB0cnVlIDogZmFsc2UpLFxuICAgICAgZW1haWw6IHRoaXMuZm9ybUdyb3VwLmdldCgnZW1haWwnKS52YWx1ZSxcbiAgICAgIGFkZHJlc3M6IHRoaXMuZm9ybUdyb3VwLmdldCgnYWRkcmVzcycpLnZhbHVlLFxuICAgICAgdGVscE51bWJlcjogdGhpcy5mb3JtR3JvdXAuZ2V0KCd0ZWxwTnVtYmVyJykudmFsdWUsXG4gICAgICBmYXhOdW1iZXI6IHRoaXMuZm9ybUdyb3VwLmdldCgnZmF4TnVtYmVyJykudmFsdWVcbiAgICB9O1xuICAgIChzdXBlci5vblN1Ym1pdChkYXRhLCAnc2VjdXJpdHknLCAncG9zdC1jb3Jwb3JhdGUnKSAgYXMgT2JzZXJ2YWJsZTxBcGlCYXNlUmVzcG9uc2U+KVxuICAgICAgLnBpcGUodGFrZVVudGlsKHRoaXMuZGVzdHJveSQpKVxuICAgICAgLnN1YnNjcmliZShyZXNwb25zZSA9PiB7XG4gICAgICAgIGlmIChyZXNwb25zZS5yZXNwU3RhdHVzQ29kZSA9PT0gUmVzcG9uc2VDb2RlLk9LX0RFRkFVTFQudG9TdHJpbmcoKSkge1xuICAgICAgICAgIHRoaXMucm91dGVyLm5hdmlnYXRlKFsnL2FwcC9tZ210L2NvcnBvcmF0ZSddKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH1cblxufVxuIiwiPGRvLXBhZ2Utb3V0bGV0IFtoZWFkZXJdPVwiJ2hlYWRlci4nK2FjdGlvbisnLWNvcnBvcmF0ZSdcIiBbdXJsXT1cIicvYXBwL21nbXQvY29ycG9yYXRlJ1wiPlxuICA8ZGl2IGNsYXNzPVwicm93XCIgcGFnZWNvbnRlbnQ+XG4gICAgPGRpdiBjbGFzcz1cImNvbC1tZC0xMiBjb2wtbGctMTJcIj5cbiAgICAgIDxmb3JtIFtmb3JtR3JvdXBdPVwiZm9ybUdyb3VwXCI+XG4gICAgICAgIDxkby1pbnB1dC10ZXh0XG4gICAgICAgICAgW25hbWVdPVwiJ2NvcnBvcmF0ZUNvZGUnXCJcbiAgICAgICAgICBbbGFiZWxdPVwiJ0NvcnBvcmF0ZSBDb2RlJ1wiXG4gICAgICAgICAgW3JlcXVpcmVkXT1cInRydWVcIlxuICAgICAgICAgIFtza2VsZXRvbl09XCJsb2FkaW5nRm9ybVwiXG4gICAgICAgICAgZm9ybUNvbnRyb2xOYW1lPVwiY29ycG9yYXRlQ29kZVwiPlxuICAgICAgICA8L2RvLWlucHV0LXRleHQ+XG4gICAgICAgIDxkby1pbnB1dC10ZXh0XG4gICAgICAgICAgW25hbWVdPVwiJ2NvcnBvcmF0ZU5hbWUnXCJcbiAgICAgICAgICBbbGFiZWxdPVwiJ0NvcnBvcmF0ZSBOYW1lJ1wiXG4gICAgICAgICAgW3JlcXVpcmVkXT1cInRydWVcIlxuICAgICAgICAgIFtza2VsZXRvbl09XCJsb2FkaW5nRm9ybVwiXG4gICAgICAgICAgZm9ybUNvbnRyb2xOYW1lPVwiY29ycG9yYXRlTmFtZVwiPlxuICAgICAgICA8L2RvLWlucHV0LXRleHQ+XG4gICAgICAgIDxkby1jaGVja2JveFxuICAgICAgICAgIFtuYW1lXT1cIidjb3Jwb3JhdGVOb25FeHBpcmVkJ1wiXG4gICAgICAgICAgW2xhYmVsXT1cIidOb24gRXhwaXJlZCdcIlxuICAgICAgICAgIFtkYXRhXT1cImRhdGFEZWZhdWx0XCJcbiAgICAgICAgICBmb3JtQ29udHJvbE5hbWU9XCJjb3Jwb3JhdGVOb25FeHBpcmVkXCI+XG4gICAgICAgIDwvZG8tY2hlY2tib3g+XG4gICAgICAgIDxkby1pbnB1dC10ZXh0XG4gICAgICAgICAgW25hbWVdPVwiJ2VtYWlsJ1wiXG4gICAgICAgICAgW2xhYmVsXT1cIidFbWFpbCdcIlxuICAgICAgICAgIFtyZXF1aXJlZF09XCJ0cnVlXCJcbiAgICAgICAgICBbcGF0dGVybl09XCJwYXR0ZXJuRW1haWxcIlxuICAgICAgICAgIFtwYXJhbUVycm9yXT1cInt2YWx1ZTo1fVwiXG4gICAgICAgICAgW3NrZWxldG9uXT1cImxvYWRpbmdGb3JtXCJcbiAgICAgICAgICBmb3JtQ29udHJvbE5hbWU9XCJlbWFpbFwiPlxuICAgICAgICA8L2RvLWlucHV0LXRleHQ+XG4gICAgICAgIDxkby10ZXh0YXJlYVxuICAgICAgICAgIFtuYW1lXT1cIidhZGRyZXNzJ1wiXG4gICAgICAgICAgW2xhYmVsXT1cIidBZGRyZXNzJ1wiXG4gICAgICAgICAgW3JlcXVpcmVkXT1cInRydWVcIlxuICAgICAgICAgIFttaW5MZW5ndGhdPVwiNVwiXG4gICAgICAgICAgW3NrZWxldG9uXT1cImxvYWRpbmdGb3JtXCJcbiAgICAgICAgICBmb3JtQ29udHJvbE5hbWU9XCJhZGRyZXNzXCI+XG4gICAgICAgIDwvZG8tdGV4dGFyZWE+XG4gICAgICAgIDxkby1pbnB1dC10ZXh0XG4gICAgICAgICAgW25hbWVdPVwiJ3RlbHBOdW1iZXInXCJcbiAgICAgICAgICBbbGFiZWxdPVwiJ1RlbHAuJ1wiXG4gICAgICAgICAgW3JlcXVpcmVkXT1cInRydWVcIlxuICAgICAgICAgIFtwYXR0ZXJuXT1cInBhdHRlcm5QaG9uZU51bWJlclwiXG4gICAgICAgICAgW3NrZWxldG9uXT1cImxvYWRpbmdGb3JtXCJcbiAgICAgICAgICBmb3JtQ29udHJvbE5hbWU9XCJ0ZWxwTnVtYmVyXCI+XG4gICAgICAgIDwvZG8taW5wdXQtdGV4dD5cbiAgICAgICAgPGRvLWlucHV0LXRleHRcbiAgICAgICAgICBbbmFtZV09XCInZmF4TnVtYmVyJ1wiXG4gICAgICAgICAgW2xhYmVsXT1cIidGYXguJ1wiXG4gICAgICAgICAgW3BhdHRlcm5dPVwicGF0dGVyblBob25lTnVtYmVyXCJcbiAgICAgICAgICBbc2tlbGV0b25dPVwibG9hZGluZ0Zvcm1cIlxuICAgICAgICAgIGZvcm1Db250cm9sTmFtZT1cImZheE51bWJlclwiPlxuICAgICAgICA8L2RvLWlucHV0LXRleHQ+XG4gICAgICA8L2Zvcm0+XG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuICA8ZG8tYnV0dG9uLXN1Ym1pdFxuICAgIFtzdWJtaXRUaXRsZV09XCJhY3Rpb25cIlxuICAgIFtyZXNldFRpdGxlXT1cIidDYW5jZWwnXCJcbiAgICBbZm9ybUdyb3VwQnV0dG9uXT1cImZvcm1Hcm91cFwiXG4gICAgW2Rpc2FibGVkQnV0dG9uXT1cImRpc2FibGVkXCJcbiAgICAob25SZXNldCk9XCJvblJlc2V0KClcIlxuICAgIChvblN1Ym1pdCk9XCJvblN1Ym1pdCgpXCJcbiAgICBwYWdlZm9vdGVyPlxuICA8L2RvLWJ1dHRvbi1zdWJtaXQ+XG48L2RvLXBhZ2Utb3V0bGV0PlxuIl19