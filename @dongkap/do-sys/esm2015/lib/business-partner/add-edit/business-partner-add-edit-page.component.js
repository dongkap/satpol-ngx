import { Component } from '@angular/core';
import { takeUntil } from 'rxjs/operators';
import { ResponseCode, Pattern } from '@dongkap/do-core';
import { BaseFormComponent } from '@dongkap/do-shared';
import * as i0 from "@angular/core";
import * as i1 from "@angular/router";
import * as i2 from "../services/business-partner.service";
import * as i3 from "@dongkap/do-shared";
import * as i4 from "@angular/forms";
export class BusinessPartnerAddEditPageComponent extends BaseFormComponent {
    constructor(injector, router, route, businessPartnerService) {
        super(injector, {
            bpName: [],
            email: [],
            address: [],
            telpNumber: [],
            faxNumber: [],
            b2bNonExpired: [],
            expiredTime: [],
        });
        this.injector = injector;
        this.router = router;
        this.route = route;
        this.businessPartnerService = businessPartnerService;
        this.action = 'Add';
        this.patternEmail = Pattern.EMAIL;
        this.patternPhoneNumber = Pattern.PHONE_NUMBER;
        this.dataDefault = [
            {
                id: 'b2bNonExpired',
                selected: true,
            },
        ];
        this.isB2bNonExpired = true;
        if (this.businessPartnerService.getB2B() || (this.route.snapshot.params['action'] === 'add')) {
            if ((this.route.snapshot.params['action'] === 'edit')) {
                this.action = 'Edit';
                this.formGroup.get('bpName').setValue(this.businessPartnerService.getB2B().businessPartner.bpName);
                this.formGroup.get('email').setValue(this.businessPartnerService.getB2B().businessPartner.email);
                this.formGroup.get('address').setValue(this.businessPartnerService.getB2B().businessPartner.address);
                this.formGroup.get('telpNumber').setValue(this.businessPartnerService.getB2B().businessPartner.telpNumber);
                this.formGroup.get('faxNumber').setValue(this.businessPartnerService.getB2B().businessPartner.faxNumber);
                this.formGroup.get('b2bNonExpired').setValue([{
                        id: 'b2bNonExpired',
                        selected: this.businessPartnerService.getB2B().b2bNonExpired ? true : false,
                    }]);
                this.formGroup.get('expiredTime').setValue(this.businessPartnerService.getB2B().expiredTime);
                this.isB2bNonExpired = this.businessPartnerService.getB2B().b2bNonExpired;
            }
            else {
                this.formGroup.get('b2bNonExpired').setValue(this.dataDefault);
            }
        }
        else {
            this.router.navigate(['/app/mgmt/business-partner']);
        }
    }
    ngOnInit() { }
    onReset() {
        this.router.navigate(['/app/mgmt/business-partner']);
    }
    onCheckB2bNonExpired(event) {
        this.isB2bNonExpired = event ? true : false;
    }
    onSubmit() {
        var _a;
        const b2bNonExpired = this.formGroup.get('b2bNonExpired').value;
        const data = {
            id: (_a = this.businessPartnerService.getB2B()) === null || _a === void 0 ? void 0 : _a.id,
            b2bNonExpired: (b2bNonExpired ? true : false),
            expiredTime: !this.isB2bNonExpired ? this.formGroup.get('expiredTime').value : null,
            businessPartner: {
                bpName: this.formGroup.get('bpName').value,
                email: this.formGroup.get('email').value,
                address: this.formGroup.get('address').value,
                telpNumber: this.formGroup.get('telpNumber').value,
                faxNumber: this.formGroup.get('faxNumber').value
            },
        };
        super.onSubmit(data, 'master', 'post-business-partner')
            .pipe(takeUntil(this.destroy$))
            .subscribe(response => {
            if (response.respStatusCode === ResponseCode.OK_DEFAULT.toString()) {
                this.router.navigate(['/app/mgmt/business-partner']);
            }
        });
    }
}
BusinessPartnerAddEditPageComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.16", ngImport: i0, type: BusinessPartnerAddEditPageComponent, deps: [{ token: i0.Injector }, { token: i1.Router }, { token: i1.ActivatedRoute }, { token: i2.BusinessPartnerService }], target: i0.ɵɵFactoryTarget.Component });
BusinessPartnerAddEditPageComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "12.2.16", type: BusinessPartnerAddEditPageComponent, selector: "do-business-partner-add-edit-page", usesInheritance: true, ngImport: i0, template: "<do-page-outlet [header]=\"'header.'+action+'-business-partner'\" [url]=\"'/app/mgmt/business-partner'\">\n  <div class=\"row\" pagecontent>\n    <div class=\"col-md-12 col-lg-12\">\n      <form [formGroup]=\"formGroup\">\n        <do-input-text\n          [name]=\"'bpName'\"\n          [label]=\"'Business Partner Name'\"\n          [required]=\"true\"\n          [skeleton]=\"loadingForm\"\n          formControlName=\"bpName\">\n        </do-input-text>\n        <do-checkbox\n          [name]=\"'b2bNonExpired'\"\n          [label]=\"'Non Expired'\"\n          [data]=\"dataDefault\"\n          (onChecked)=\"onCheckB2bNonExpired($event)\"\n          formControlName=\"b2bNonExpired\">\n        </do-checkbox>\n        <do-datepicker\n          [show]=\"!isB2bNonExpired\"\n          [name]=\"'expiredTime'\"\n          [label]=\"'Expired Date'\"\n          [required]=\"!isB2bNonExpired\"\n          formControlName=\"expiredTime\">\n        </do-datepicker>\n        <do-input-text\n          [name]=\"'email'\"\n          [label]=\"'Email'\"\n          [required]=\"true\"\n          [pattern]=\"patternEmail\"\n          [paramError]=\"{value:5}\"\n          [skeleton]=\"loadingForm\"\n          formControlName=\"email\">\n        </do-input-text>\n        <do-textarea\n          [name]=\"'address'\"\n          [label]=\"'Address'\"\n          [required]=\"true\"\n          [minLength]=\"5\"\n          [skeleton]=\"loadingForm\"\n          formControlName=\"address\">\n        </do-textarea>\n        <do-input-text\n          [name]=\"'telpNumber'\"\n          [label]=\"'Telp.'\"\n          [required]=\"true\"\n          [pattern]=\"patternPhoneNumber\"\n          [skeleton]=\"loadingForm\"\n          formControlName=\"telpNumber\">\n        </do-input-text>\n        <do-input-text\n          [name]=\"'faxNumber'\"\n          [label]=\"'Fax.'\"\n          [pattern]=\"patternPhoneNumber\"\n          [skeleton]=\"loadingForm\"\n          formControlName=\"faxNumber\">\n        </do-input-text>\n      </form>\n    </div>\n  </div>\n  <do-button-submit\n    [submitTitle]=\"action\"\n    [resetTitle]=\"'Cancel'\"\n    [formGroupButton]=\"formGroup\"\n    [disabledButton]=\"disabled\"\n    (onReset)=\"onReset()\"\n    (onSubmit)=\"onSubmit()\"\n    pagefooter>\n  </do-button-submit>\n</do-page-outlet>\n", styles: [""], components: [{ type: i3.DoPageOutletComponent, selector: "do-page-outlet", inputs: ["header", "url", "width", "dataSelect", "selected", "param", "hidefooter", "showToggle", "isCollapsed", "iconToggle"], outputs: ["selectChange", "onCollapsed", "onExpanded"] }, { type: i3.DoInputTextComponent, selector: "do-input-text", inputs: ["placeholder", "colLabel", "colInput", "minLength", "maxLength", "min", "max", "step", "capslock", "type", "togglePassword", "showPassword"] }, { type: i3.DoCheckboxComponent, selector: "do-checkbox", inputs: ["colLabel", "colInput", "data"], outputs: ["onChecked"] }, { type: i3.DoDatePickerComponent, selector: "do-datepicker", inputs: ["placeholder", "colLabel", "colInput", "min", "max", "size", "dateMask"] }, { type: i3.DoTextareaComponent, selector: "do-textarea", inputs: ["placeholder", "colLabel", "colInput", "minLength", "maxLength", "height"] }, { type: i3.DoButtonSubmitComponent, selector: "do-button-submit", inputs: ["colLabel", "colButton", "resetTitle", "submitTitle", "disabledButton", "disabledReset", "type", "status", "skeleton", "formGroupButton"], outputs: ["onSubmit", "onReset"] }], directives: [{ type: i4.ɵNgNoValidate, selector: "form:not([ngNoForm]):not([ngNativeValidate])" }, { type: i4.NgControlStatusGroup, selector: "[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]" }, { type: i4.FormGroupDirective, selector: "[formGroup]", inputs: ["formGroup"], outputs: ["ngSubmit"], exportAs: ["ngForm"] }, { type: i4.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { type: i4.FormControlName, selector: "[formControlName]", inputs: ["disabled", "formControlName", "ngModel"], outputs: ["ngModelChange"] }, { type: i4.RequiredValidator, selector: ":not([type=checkbox])[required][formControlName],:not([type=checkbox])[required][formControl],:not([type=checkbox])[required][ngModel]", inputs: ["required"] }, { type: i4.PatternValidator, selector: "[pattern][formControlName],[pattern][formControl],[pattern][ngModel]", inputs: ["pattern"] }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.16", ngImport: i0, type: BusinessPartnerAddEditPageComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'do-business-partner-add-edit-page',
                    styleUrls: ['./business-partner-add-edit-page.component.scss'],
                    templateUrl: './business-partner-add-edit-page.component.html',
                }]
        }], ctorParameters: function () { return [{ type: i0.Injector }, { type: i1.Router }, { type: i1.ActivatedRoute }, { type: i2.BusinessPartnerService }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnVzaW5lc3MtcGFydG5lci1hZGQtZWRpdC1wYWdlLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uL0Bkb25na2FwL2RvLXN5cy9zcmMvbGliL2J1c2luZXNzLXBhcnRuZXIvYWRkLWVkaXQvYnVzaW5lc3MtcGFydG5lci1hZGQtZWRpdC1wYWdlLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uLy4uL0Bkb25na2FwL2RvLXN5cy9zcmMvbGliL2J1c2luZXNzLXBhcnRuZXIvYWRkLWVkaXQvYnVzaW5lc3MtcGFydG5lci1hZGQtZWRpdC1wYWdlLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVksTUFBTSxlQUFlLENBQUM7QUFJcEQsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQzNDLE9BQU8sRUFBbUIsWUFBWSxFQUFFLE9BQU8sRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBQzFFLE9BQU8sRUFBRSxpQkFBaUIsRUFBaUIsTUFBTSxvQkFBb0IsQ0FBQzs7Ozs7O0FBU3RFLE1BQU0sT0FBTyxtQ0FBb0MsU0FBUSxpQkFBc0I7SUFZN0UsWUFDUyxRQUFrQixFQUNqQixNQUFjLEVBQ2QsS0FBcUIsRUFDckIsc0JBQThDO1FBQ3RELEtBQUssQ0FBQyxRQUFRLEVBQ1o7WUFDRSxNQUFNLEVBQUUsRUFBRTtZQUNWLEtBQUssRUFBRSxFQUFFO1lBQ1QsT0FBTyxFQUFFLEVBQUU7WUFDWCxVQUFVLEVBQUUsRUFBRTtZQUNkLFNBQVMsRUFBRSxFQUFFO1lBQ2IsYUFBYSxFQUFFLEVBQUU7WUFDakIsV0FBVyxFQUFFLEVBQUU7U0FDaEIsQ0FBQyxDQUFDO1FBYkUsYUFBUSxHQUFSLFFBQVEsQ0FBVTtRQUNqQixXQUFNLEdBQU4sTUFBTSxDQUFRO1FBQ2QsVUFBSyxHQUFMLEtBQUssQ0FBZ0I7UUFDckIsMkJBQXNC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QUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7YUFDOUIsU0FBUyxDQUFDLFFBQVEsQ0FBQyxFQUFFO1lBQ3BCLElBQUksUUFBUSxDQUFDLGNBQWMsS0FBSyxZQUFZLENBQUMsVUFBVSxDQUFDLFFBQVEsRUFBRSxFQUFFO2dCQUNsRSxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLDRCQUE0QixDQUFDLENBQUMsQ0FBQzthQUN0RDtRQUNILENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQzs7aUlBaEZVLG1DQUFtQztxSEFBbkMsbUNBQW1DLGdHQ2ZoRCwyeEVBc0VBOzRGRHZEYSxtQ0FBbUM7a0JBTC9DLFNBQVM7bUJBQUM7b0JBQ1QsUUFBUSxFQUFFLG1DQUFtQztvQkFDN0MsU0FBUyxFQUFFLENBQUMsaURBQWlELENBQUM7b0JBQzlELFdBQVcsRUFBRSxpREFBaUQ7aUJBQy9EIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBJbmplY3RvciB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgT25Jbml0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBSb3V0ZXIsIEFjdGl2YXRlZFJvdXRlIH0gZnJvbSAnQGFuZ3VsYXIvcm91dGVyJztcbmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IHRha2VVbnRpbCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCB7IEFwaUJhc2VSZXNwb25zZSwgUmVzcG9uc2VDb2RlLCBQYXR0ZXJuIH0gZnJvbSAnQGRvbmdrYXAvZG8tY29yZSc7XG5pbXBvcnQgeyBCYXNlRm9ybUNvbXBvbmVudCwgQ2hlY2tib3hNb2RlbCB9IGZyb20gJ0Bkb25na2FwL2RvLXNoYXJlZCc7XG5pbXBvcnQgeyBCdXNpbmVzc1BhcnRuZXJTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvYnVzaW5lc3MtcGFydG5lci5zZXJ2aWNlJztcbmltcG9ydCB7IEIyQk1vZGVsIH0gZnJvbSAnLi4vbW9kZWxzL2J1c2luZXNzLXBhcnRuZXIubW9kZWwnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdkby1idXNpbmVzcy1wYXJ0bmVyLWFkZC1lZGl0LXBhZ2UnLFxuICBzdHlsZVVybHM6IFsnLi9idXNpbmVzcy1wYXJ0bmVyLWFkZC1lZGl0LXBhZ2UuY29tcG9uZW50LnNjc3MnXSxcbiAgdGVtcGxhdGVVcmw6ICcuL2J1c2luZXNzLXBhcnRuZXItYWRkLWVkaXQtcGFnZS5jb21wb25lbnQuaHRtbCcsXG59KVxuZXhwb3J0IGNsYXNzIEJ1c2luZXNzUGFydG5lckFkZEVkaXRQYWdlQ29tcG9uZW50IGV4dGVuZHMgQmFzZUZvcm1Db21wb25lbnQ8YW55PiBpbXBsZW1lbnRzIE9uSW5pdCB7XG5cbiAgcHVibGljIGFjdGlvbjogJ0FkZCcgfCAnRWRpdCcgPSAnQWRkJztcbiAgcHVibGljIHBhdHRlcm5FbWFpbDogc3RyaW5nID0gUGF0dGVybi5FTUFJTDtcbiAgcHVibGljIHBhdHRlcm5QaG9uZU51bWJlcjogc3RyaW5nID0gUGF0dGVybi5QSE9ORV9OVU1CRVI7XG4gIHB1YmxpYyBkYXRhRGVmYXVsdDogQ2hlY2tib3hNb2RlbFtdID0gW1xuICAgIHtcbiAgICAgIGlkOiAnYjJiTm9uRXhwaXJlZCcsXG4gICAgICBzZWxlY3RlZDogdHJ1ZSxcbiAgICB9LFxuICBdO1xuICBwdWJsaWMgaXNCMmJOb25FeHBpcmVkOiBib29sZWFuID0gdHJ1ZTtcbiAgY29uc3RydWN0b3IoXG4gICAgcHVibGljIGluamVjdG9yOiBJbmplY3RvcixcbiAgICBwcml2YXRlIHJvdXRlcjogUm91dGVyLFxuICAgIHByaXZhdGUgcm91dGU6IEFjdGl2YXRlZFJvdXRlLFxuICAgIHByaXZhdGUgYnVzaW5lc3NQYXJ0bmVyU2VydmljZTogQnVzaW5lc3NQYXJ0bmVyU2VydmljZSkge1xuICAgIHN1cGVyKGluamVjdG9yLFxuICAgICAge1xuICAgICAgICBicE5hbWU6IFtdLFxuICAgICAgICBlbWFpbDogW10sXG4gICAgICAgIGFkZHJlc3M6IFtdLFxuICAgICAgICB0ZWxwTnVtYmVyOiBbXSxcbiAgICAgICAgZmF4TnVtYmVyOiBbXSxcbiAgICAgICAgYjJiTm9uRXhwaXJlZDogW10sXG4gICAgICAgIGV4cGlyZWRUaW1lOiBbXSxcbiAgICAgIH0pO1xuICAgIGlmICh0aGlzLmJ1c2luZXNzUGFydG5lclNlcnZpY2UuZ2V0QjJCKCkgfHwgKHRoaXMucm91dGUuc25hcHNob3QucGFyYW1zWydhY3Rpb24nXSA9PT0gJ2FkZCcpKSB7XG4gICAgICBpZiAoKHRoaXMucm91dGUuc25hcHNob3QucGFyYW1zWydhY3Rpb24nXSA9PT0gJ2VkaXQnKSkge1xuICAgICAgICB0aGlzLmFjdGlvbiA9ICdFZGl0JztcbiAgICAgICAgdGhpcy5mb3JtR3JvdXAuZ2V0KCdicE5hbWUnKS5zZXRWYWx1ZSh0aGlzLmJ1c2luZXNzUGFydG5lclNlcnZpY2UuZ2V0QjJCKCkuYnVzaW5lc3NQYXJ0bmVyLmJwTmFtZSk7XG4gICAgICAgIHRoaXMuZm9ybUdyb3VwLmdldCgnZW1haWwnKS5zZXRWYWx1ZSh0aGlzLmJ1c2luZXNzUGFydG5lclNlcnZpY2UuZ2V0QjJCKCkuYnVzaW5lc3NQYXJ0bmVyLmVtYWlsKTtcbiAgICAgICAgdGhpcy5mb3JtR3JvdXAuZ2V0KCdhZGRyZXNzJykuc2V0VmFsdWUodGhpcy5idXNpbmVzc1BhcnRuZXJTZXJ2aWNlLmdldEIyQigpLmJ1c2luZXNzUGFydG5lci5hZGRyZXNzKTtcbiAgICAgICAgdGhpcy5mb3JtR3JvdXAuZ2V0KCd0ZWxwTnVtYmVyJykuc2V0VmFsdWUodGhpcy5idXNpbmVzc1BhcnRuZXJTZXJ2aWNlLmdldEIyQigpLmJ1c2luZXNzUGFydG5lci50ZWxwTnVtYmVyKTtcbiAgICAgICAgdGhpcy5mb3JtR3JvdXAuZ2V0KCdmYXhOdW1iZXInKS5zZXRWYWx1ZSh0aGlzLmJ1c2luZXNzUGFydG5lclNlcnZpY2UuZ2V0QjJCKCkuYnVzaW5lc3NQYXJ0bmVyLmZheE51bWJlcik7XG4gICAgICAgIHRoaXMuZm9ybUdyb3VwLmdldCgnYjJiTm9uRXhwaXJlZCcpLnNldFZhbHVlKFt7XG4gICAgICAgICAgaWQ6ICdiMmJOb25FeHBpcmVkJyxcbiAgICAgICAgICBzZWxlY3RlZDogdGhpcy5idXNpbmVzc1BhcnRuZXJTZXJ2aWNlLmdldEIyQigpLmIyYk5vbkV4cGlyZWQgPyB0cnVlIDogZmFsc2UsXG4gICAgICAgIH1dKTtcbiAgICAgICAgdGhpcy5mb3JtR3JvdXAuZ2V0KCdleHBpcmVkVGltZScpLnNldFZhbHVlKHRoaXMuYnVzaW5lc3NQYXJ0bmVyU2VydmljZS5nZXRCMkIoKS5leHBpcmVkVGltZSk7XG4gICAgICAgIHRoaXMuaXNCMmJOb25FeHBpcmVkID0gdGhpcy5idXNpbmVzc1BhcnRuZXJTZXJ2aWNlLmdldEIyQigpLmIyYk5vbkV4cGlyZWQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmZvcm1Hcm91cC5nZXQoJ2IyYk5vbkV4cGlyZWQnKS5zZXRWYWx1ZSh0aGlzLmRhdGFEZWZhdWx0KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yb3V0ZXIubmF2aWdhdGUoWycvYXBwL21nbXQvYnVzaW5lc3MtcGFydG5lciddKTtcbiAgICB9XG4gIH1cblxuICBuZ09uSW5pdCgpOiB2b2lkIHt9XG5cbiAgb25SZXNldCgpOiB2b2lkIHtcbiAgICB0aGlzLnJvdXRlci5uYXZpZ2F0ZShbJy9hcHAvbWdtdC9idXNpbmVzcy1wYXJ0bmVyJ10pO1xuICB9XG5cbiAgb25DaGVja0IyYk5vbkV4cGlyZWQoZXZlbnQ6IENoZWNrYm94TW9kZWxbXSk6IHZvaWQge1xuICAgIHRoaXMuaXNCMmJOb25FeHBpcmVkID0gZXZlbnQgPyB0cnVlIDogZmFsc2U7XG4gIH1cblxuICBvblN1Ym1pdCgpOiB2b2lkIHtcbiAgICBjb25zdCBiMmJOb25FeHBpcmVkOiBDaGVja2JveE1vZGVsW10gPSB0aGlzLmZvcm1Hcm91cC5nZXQoJ2IyYk5vbkV4cGlyZWQnKS52YWx1ZTtcbiAgICBjb25zdCBkYXRhOiBCMkJNb2RlbCA9IHtcbiAgICAgIGlkOiB0aGlzLmJ1c2luZXNzUGFydG5lclNlcnZpY2UuZ2V0QjJCKCk/LmlkLFxuICAgICAgYjJiTm9uRXhwaXJlZDogKGIyYk5vbkV4cGlyZWQgPyB0cnVlIDogZmFsc2UpLFxuICAgICAgZXhwaXJlZFRpbWU6ICF0aGlzLmlzQjJiTm9uRXhwaXJlZCA/IHRoaXMuZm9ybUdyb3VwLmdldCgnZXhwaXJlZFRpbWUnKS52YWx1ZSA6IG51bGwsXG4gICAgICBidXNpbmVzc1BhcnRuZXI6IHtcbiAgICAgICAgYnBOYW1lOiB0aGlzLmZvcm1Hcm91cC5nZXQoJ2JwTmFtZScpLnZhbHVlLFxuICAgICAgICBlbWFpbDogdGhpcy5mb3JtR3JvdXAuZ2V0KCdlbWFpbCcpLnZhbHVlLFxuICAgICAgICBhZGRyZXNzOiB0aGlzLmZvcm1Hcm91cC5nZXQoJ2FkZHJlc3MnKS52YWx1ZSxcbiAgICAgICAgdGVscE51bWJlcjogdGhpcy5mb3JtR3JvdXAuZ2V0KCd0ZWxwTnVtYmVyJykudmFsdWUsXG4gICAgICAgIGZheE51bWJlcjogdGhpcy5mb3JtR3JvdXAuZ2V0KCdmYXhOdW1iZXInKS52YWx1ZVxuICAgICAgfSxcbiAgICB9O1xuICAgIChzdXBlci5vblN1Ym1pdChkYXRhLCAnbWFzdGVyJywgJ3Bvc3QtYnVzaW5lc3MtcGFydG5lcicpICBhcyBPYnNlcnZhYmxlPEFwaUJhc2VSZXNwb25zZT4pXG4gICAgICAucGlwZSh0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpXG4gICAgICAuc3Vic2NyaWJlKHJlc3BvbnNlID0+IHtcbiAgICAgICAgaWYgKHJlc3BvbnNlLnJlc3BTdGF0dXNDb2RlID09PSBSZXNwb25zZUNvZGUuT0tfREVGQVVMVC50b1N0cmluZygpKSB7XG4gICAgICAgICAgdGhpcy5yb3V0ZXIubmF2aWdhdGUoWycvYXBwL21nbXQvYnVzaW5lc3MtcGFydG5lciddKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH1cblxufVxuIiwiPGRvLXBhZ2Utb3V0bGV0IFtoZWFkZXJdPVwiJ2hlYWRlci4nK2FjdGlvbisnLWJ1c2luZXNzLXBhcnRuZXInXCIgW3VybF09XCInL2FwcC9tZ210L2J1c2luZXNzLXBhcnRuZXInXCI+XG4gIDxkaXYgY2xhc3M9XCJyb3dcIiBwYWdlY29udGVudD5cbiAgICA8ZGl2IGNsYXNzPVwiY29sLW1kLTEyIGNvbC1sZy0xMlwiPlxuICAgICAgPGZvcm0gW2Zvcm1Hcm91cF09XCJmb3JtR3JvdXBcIj5cbiAgICAgICAgPGRvLWlucHV0LXRleHRcbiAgICAgICAgICBbbmFtZV09XCInYnBOYW1lJ1wiXG4gICAgICAgICAgW2xhYmVsXT1cIidCdXNpbmVzcyBQYXJ0bmVyIE5hbWUnXCJcbiAgICAgICAgICBbcmVxdWlyZWRdPVwidHJ1ZVwiXG4gICAgICAgICAgW3NrZWxldG9uXT1cImxvYWRpbmdGb3JtXCJcbiAgICAgICAgICBmb3JtQ29udHJvbE5hbWU9XCJicE5hbWVcIj5cbiAgICAgICAgPC9kby1pbnB1dC10ZXh0PlxuICAgICAgICA8ZG8tY2hlY2tib3hcbiAgICAgICAgICBbbmFtZV09XCInYjJiTm9uRXhwaXJlZCdcIlxuICAgICAgICAgIFtsYWJlbF09XCInTm9uIEV4cGlyZWQnXCJcbiAgICAgICAgICBbZGF0YV09XCJkYXRhRGVmYXVsdFwiXG4gICAgICAgICAgKG9uQ2hlY2tlZCk9XCJvbkNoZWNrQjJiTm9uRXhwaXJlZCgkZXZlbnQpXCJcbiAgICAgICAgICBmb3JtQ29udHJvbE5hbWU9XCJiMmJOb25FeHBpcmVkXCI+XG4gICAgICAgIDwvZG8tY2hlY2tib3g+XG4gICAgICAgIDxkby1kYXRlcGlja2VyXG4gICAgICAgICAgW3Nob3ddPVwiIWlzQjJiTm9uRXhwaXJlZFwiXG4gICAgICAgICAgW25hbWVdPVwiJ2V4cGlyZWRUaW1lJ1wiXG4gICAgICAgICAgW2xhYmVsXT1cIidFeHBpcmVkIERhdGUnXCJcbiAgICAgICAgICBbcmVxdWlyZWRdPVwiIWlzQjJiTm9uRXhwaXJlZFwiXG4gICAgICAgICAgZm9ybUNvbnRyb2xOYW1lPVwiZXhwaXJlZFRpbWVcIj5cbiAgICAgICAgPC9kby1kYXRlcGlja2VyPlxuICAgICAgICA8ZG8taW5wdXQtdGV4dFxuICAgICAgICAgIFtuYW1lXT1cIidlbWFpbCdcIlxuICAgICAgICAgIFtsYWJlbF09XCInRW1haWwnXCJcbiAgICAgICAgICBbcmVxdWlyZWRdPVwidHJ1ZVwiXG4gICAgICAgICAgW3BhdHRlcm5dPVwicGF0dGVybkVtYWlsXCJcbiAgICAgICAgICBbcGFyYW1FcnJvcl09XCJ7dmFsdWU6NX1cIlxuICAgICAgICAgIFtza2VsZXRvbl09XCJsb2FkaW5nRm9ybVwiXG4gICAgICAgICAgZm9ybUNvbnRyb2xOYW1lPVwiZW1haWxcIj5cbiAgICAgICAgPC9kby1pbnB1dC10ZXh0PlxuICAgICAgICA8ZG8tdGV4dGFyZWFcbiAgICAgICAgICBbbmFtZV09XCInYWRkcmVzcydcIlxuICAgICAgICAgIFtsYWJlbF09XCInQWRkcmVzcydcIlxuICAgICAgICAgIFtyZXF1aXJlZF09XCJ0cnVlXCJcbiAgICAgICAgICBbbWluTGVuZ3RoXT1cIjVcIlxuICAgICAgICAgIFtza2VsZXRvbl09XCJsb2FkaW5nRm9ybVwiXG4gICAgICAgICAgZm9ybUNvbnRyb2xOYW1lPVwiYWRkcmVzc1wiPlxuICAgICAgICA8L2RvLXRleHRhcmVhPlxuICAgICAgICA8ZG8taW5wdXQtdGV4dFxuICAgICAgICAgIFtuYW1lXT1cIid0ZWxwTnVtYmVyJ1wiXG4gICAgICAgICAgW2xhYmVsXT1cIidUZWxwLidcIlxuICAgICAgICAgIFtyZXF1aXJlZF09XCJ0cnVlXCJcbiAgICAgICAgICBbcGF0dGVybl09XCJwYXR0ZXJuUGhvbmVOdW1iZXJcIlxuICAgICAgICAgIFtza2VsZXRvbl09XCJsb2FkaW5nRm9ybVwiXG4gICAgICAgICAgZm9ybUNvbnRyb2xOYW1lPVwidGVscE51bWJlclwiPlxuICAgICAgICA8L2RvLWlucHV0LXRleHQ+XG4gICAgICAgIDxkby1pbnB1dC10ZXh0XG4gICAgICAgICAgW25hbWVdPVwiJ2ZheE51bWJlcidcIlxuICAgICAgICAgIFtsYWJlbF09XCInRmF4LidcIlxuICAgICAgICAgIFtwYXR0ZXJuXT1cInBhdHRlcm5QaG9uZU51bWJlclwiXG4gICAgICAgICAgW3NrZWxldG9uXT1cImxvYWRpbmdGb3JtXCJcbiAgICAgICAgICBmb3JtQ29udHJvbE5hbWU9XCJmYXhOdW1iZXJcIj5cbiAgICAgICAgPC9kby1pbnB1dC10ZXh0PlxuICAgICAgPC9mb3JtPlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbiAgPGRvLWJ1dHRvbi1zdWJtaXRcbiAgICBbc3VibWl0VGl0bGVdPVwiYWN0aW9uXCJcbiAgICBbcmVzZXRUaXRsZV09XCInQ2FuY2VsJ1wiXG4gICAgW2Zvcm1Hcm91cEJ1dHRvbl09XCJmb3JtR3JvdXBcIlxuICAgIFtkaXNhYmxlZEJ1dHRvbl09XCJkaXNhYmxlZFwiXG4gICAgKG9uUmVzZXQpPVwib25SZXNldCgpXCJcbiAgICAob25TdWJtaXQpPVwib25TdWJtaXQoKVwiXG4gICAgcGFnZWZvb3Rlcj5cbiAgPC9kby1idXR0b24tc3VibWl0PlxuPC9kby1wYWdlLW91dGxldD5cbiJdfQ==